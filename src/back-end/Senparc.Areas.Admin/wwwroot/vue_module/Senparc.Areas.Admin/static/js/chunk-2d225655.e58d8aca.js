(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d225655"],{e3e6:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"el-main"},[t("div",[t("div",{staticClass:"admin-user-info"},[t("div",{staticClass:"filter-container"},[t("el-button",{staticClass:"filter-item",attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleEdit}},[e._v("增加")])],1),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{align:"center",label:"id",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.id)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"用户名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.userName)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.note)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(a.row.addTime)+" ")]}}])}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleEdit(a.$index,a.row)}}},[e._v("编辑 ")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleSet(a.$index,a.row)}}},[e._v("设置角色 ")]),t("el-popconfirm",{attrs:{placement:"top",title:"确认删除此角色吗？"},on:{"on-confirm":function(t){return e.handleDelete(a.$index,a.row)}}},[t("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.dialog.title,visible:e.dialog.visible},on:{"update:visible":function(a){return e.$set(e.dialog,"visible",a)}}},[t("el-form",{ref:"dataForm",staticStyle:{"max-width":"400px","margin-left":"50px"},attrs:{model:e.dialog.data,rules:e.dialog.rules,"label-position":"left","label-width":"100px"}},["编辑管理员"===e.dialog.title?t("p",{staticClass:"username-tip"},[e._v("不建议修改用户名！")]):e._e(),t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.dialog.data.userName,callback:function(a){e.$set(e.dialog.data,"userName",a)},expression:"dialog.data.userName"}})],1),t("el-form-item",{attrs:{error:e.dialog.passwordError,required:e.isVerPass,label:"密码"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入密码","show-password":""},model:{value:e.dialog.data.password,callback:function(a){e.$set(e.dialog.data,"password",a)},expression:"dialog.data.password"}})],1),t("el-form-item",{attrs:{error:e.dialog.password2Error,required:e.isVerPass,label:"确认密码"}},[t("el-input",{attrs:{clearable:"",placeholder:"请再次输入密码","show-password":""},model:{value:e.dialog.data.password2,callback:function(a){e.$set(e.dialog.data,"password2",a)},expression:"dialog.data.password2"}})],1),t("el-form-item",{attrs:{label:"真实姓名",prop:"realName"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入真实姓名"},model:{value:e.dialog.data.realName,callback:function(a){e.$set(e.dialog.data,"realName",a)},expression:"dialog.data.realName"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:e.dialog.data.phone,callback:function(a){e.$set(e.dialog.data,"phone",a)},expression:"dialog.data.phone"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"note"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入备注信息"},model:{value:e.dialog.data.note,callback:function(a){e.$set(e.dialog.data,"note",a)},expression:"dialog.data.note"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialog.visible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{loading:e.dialog.updateLoading,type:"primary"},on:{click:e.updateData}},[e._v("确 认")])],1)],1),t("el-dialog",{attrs:{title:"设置角色-"+e.dialog.setTitle,visible:e.dialog.visibleSet},on:{"update:visible":function(a){return e.$set(e.dialog,"visibleSet",a)}}},[t("el-checkbox-group",{model:{value:e.dialog.dialogSetSelected,callback:function(a){e.$set(e.dialog,"dialogSetSelected",a)},expression:"dialog.dialogSetSelected"}},e._l(e.dialog.dialogSetData,(function(a){return t("el-checkbox",{attrs:{label:a.value,border:""}},[e._v(e._s(a.text))])})),1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.dialog.visibleSet=!1}}},[e._v("取 消")]),t("el-button",{attrs:{loading:e.dialog.updateLoading,type:"primary"},on:{click:e.updateDataSet}},[e._v("确 认")])],1)],1)],1)])])},l=[],o=t("7580"),s=(t("96cf"),t("50fc")),r={name:"AdminUserInfo",data:function(){return{paginationQuery:{total:5},listQuery:{pageIndex:1,pageSize:100},tableData:[],dialog:{title:"新增管理员",visible:!1,data:{id:0,userName:"",password:"",password2:"",realName:"",phone:"",note:""},rules:{userName:[{required:!0,message:"用户名为必填项",trigger:"blur"}]},updateLoading:!1,visibleSet:!1,updateLoadingSet:!1,dialogSetData:[],dialogSetSelected:[],setId:"",setTitle:"",passwordError:"",password2Error:"",isVerTrue:!1}}},computed:{isVerPass:function(){return"新增管理员"===this.dialog.title||("编辑管理员"===this.dialog.title&&this.dialog.data.password.length>0||"编辑管理员"===this.dialog.title&&this.dialog.data.password2.length>0)}},watch:{"dialog.data.password":function(e){this.checkPass()},"dialog.data.password2":function(e){this.checkPass()},"dialog.visible":function(e,a){e||(this.dialog.data={id:0,userName:"",password:"",password2:"",realName:"",phone:"",note:""},this.dialog.password2Error="",this.dialog.passwordError="",this.dialog.updateLoading=!1,this.$refs["dataForm"].resetFields())}},created:function(){this.getList()},methods:{checkPass:function(){if(this.isVerPass){if(""!==this.dialog.data.password)return this.dialog.passwordError="",""===this.dialog.data.password2?(this.dialog.password2Error="请再次输入密码",this.dialog.isVerTrue=!1,!1):this.dialog.data.password!==this.dialog.data.password2?(this.dialog.password2Error="请输入相同的密码",this.dialog.isVerTrue=!1,!1):(this.dialog.password2Error="",this.dialog.passwordError="",this.dialog.isVerTrue=!0,!0);if(this.dialog.visible)return this.dialog.passwordError="请输入密码",this.dialog.isVerTrue=!1,!1}},getList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var t,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.listQuery,t.adminUserInfoName,t.pageIndex,t.pageSize,a.next=3,Object(s["a"])(e.listQuery);case 3:i=a.sent,i.success&&(l=i.data,e.tableData=l.list,e.paginationQuery.total=l.totalCount);case 5:case"end":return a.stop()}}),a)})))()},handleEdit:function(e,a){if(this.dialog.visible=!0,a){var t=a.userName,i=(a.password,a.realName),l=a.phone,o=a.note,s=a.id;this.dialog.data={userName:t,realName:i,phone:l,note:o,id:s,password:"",password2:""},this.dialog.title="编辑管理员",this.dialog=Object.assign({},this.dialog)}else this.dialog.title="新增管理员"},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(a){if(a){if(e.isVerPass&&!e.dialog.isVerTrue)return!1;e.dialog.updateLoading=!0;e.dialog.data.id,e.dialog.data.userName,e.dialog.data.password,e.dialog.data.note,e.dialog.data.realName,e.dialog.data.phone}}))},updateDataSet:function(){this.dialog.updateLoadingSet=!0;this.dialog.dialogSetSelected,this.setId},handleSet:function(e,a){this.dialog.dialogSetSelected=[],this.dialog.visibleSet=!0,this.setId=a.id,this.dialog.setTitle=a.userName},handleDelete:function(e,a){a.id}}},d=r,n=t("2877"),u=Object(n["a"])(d,i,l,!1,null,"3a2d4401",null);a["default"]=u.exports}}]);