(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdcab"],{"2e02":function(a,e,f){"use strict";f.r(e);var t=function(){var a=this,e=a.$createElement,f=a._self._c||e;return f("div",{staticClass:"el-main"},[f("div",{staticClass:"admin-role"},[f("div",{staticClass:"filter-container"},[f("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){return a.handleEdit("","","add")}}},[a._v("增加菜单 ")])],1),f("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:a.tableData,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[f("el-table-column",{attrs:{prop:"menuName",align:"left",label:"菜单名称"}}),f("el-table-column",{attrs:{prop:"sort",align:"center",label:"排序",sortable:""}}),f("el-table-column",{attrs:{prop:"adminRemark",align:"center",label:"备注"}}),f("el-table-column",{attrs:{prop:"remark",align:"center",label:"说明"}}),f("el-table-column",{attrs:{align:"center",label:"添加时间"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(" "+a._s(a.formaTableTime(e.row.addTime))+" ")]}}])}),f("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:a._u([{key:"default",fn:function(e){return[f("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(f){return a.handleEdit(e.$index,e.row,"edit")}}},[a._v("编辑 ")]),e.row.children?f("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(f){return a.handleEdit(e.$index,e.row,"addNext")}}},[a._v("增加下一级 ")]):a._e(),f("el-popconfirm",{attrs:{placement:"top",title:"确认删除此菜单吗？"},on:{"on-confirm":function(f){return a.handleDelete(e.$index,e.row)}}},[f("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[a._v("删除")])],1)]}}])})],1),f("el-dialog",{attrs:{title:a.dialog.title,visible:a.dialog.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){return a.$set(a.dialog,"visible",e)}}},[f("el-form",{ref:"dataForm",staticStyle:{"max-width":"400px","margin-left":"50px"},attrs:{rules:a.dialog.rules,model:a.dialog.data,disabled:a.dialog.disabled,"label-position":"left","label-width":"100px"}},[f("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[f("el-input",{attrs:{clearable:"",placeholder:""},model:{value:a.dialog.data.menuName,callback:function(e){a.$set(a.dialog.data,"menuName",e)},expression:"dialog.data.menuName"}})],1),f("el-form-item",{attrs:{label:"父级菜单"}},[f("el-cascader",{attrs:{options:a.tableData,clearable:"",props:{checkStrictly:a.dialog.checkStrictly,label:"menuName",value:"id"}},model:{value:a.dialog.data.parentId,callback:function(e){a.$set(a.dialog.data,"parentId",e)},expression:"dialog.data.parentId"}})],1),f("el-form-item",{attrs:{label:"排序"}},[f("el-input",{attrs:{type:"number",clearable:"",placeholder:""},model:{value:a.dialog.data.sort,callback:function(e){a.$set(a.dialog.data,"sort",e)},expression:"dialog.data.sort"}})],1),f("el-form-item",{attrs:{label:"类型",prop:"menuType"}},[f("el-radio-group",{model:{value:a.dialog.data.menuType,callback:function(e){a.$set(a.dialog.data,"menuType",e)},expression:"dialog.data.menuType"}},[f("el-radio",{attrs:{label:1}},[a._v("菜单")]),f("el-radio",{attrs:{label:2}},[a._v("页面")]),f("el-radio",{attrs:{label:3}},[a._v("按钮")])],1)],1),f("el-form-item",{attrs:{label:"路径"}},[f("el-input",{attrs:{clearable:"",placeholder:""},model:{value:a.dialog.data.url,callback:function(e){a.$set(a.dialog.data,"url",e)},expression:"dialog.data.url"}})],1),f("el-form-item",{attrs:{label:"操作代码",prop:"resourceCode"}},[f("el-input",{attrs:{clearable:"",placeholder:""},model:{value:a.dialog.data.resourceCode,callback:function(e){a.$set(a.dialog.data,"resourceCode",e)},expression:"dialog.data.resourceCode"}})],1),f("el-form-item",{attrs:{label:"是否锁定"}},[f("el-switch",{model:{value:a.dialog.data.isLocked,callback:function(e){a.$set(a.dialog.data,"isLocked",e)},expression:"dialog.data.isLocked"}})],1),f("el-form-item",{attrs:{label:"是否显示"}},[f("el-switch",{model:{value:a.dialog.data.visible,callback:function(e){a.$set(a.dialog.data,"visible",e)},expression:"dialog.data.visible"}})],1),f("el-form-item",{attrs:{label:"图标"}},[a.dialog.data.icon?f("i",{class:"fa "+a.dialog.data.icon}):a._e(),f("el-button",{staticStyle:{"margin-left":"15px"},attrs:{plain:""},on:{click:function(e){a.dialogIcon.visible=!0}}},[a._v("选择图标")])],1)],1),f("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[f("el-button",{on:{click:function(e){a.dialog.visible=!1}}},[a._v("取 消")]),f("el-button",{attrs:{loading:a.dialog.updateLoading,disabled:a.dialog.disabled,type:"primary"},on:{click:a.updateData}},[a._v("确 认 ")])],1)],1),f("el-dialog",{attrs:{title:"图标列表",visible:a.dialogIcon.visible},on:{"update:visible":function(e){return a.$set(a.dialogIcon,"visible",e)}}},[f("div",{staticClass:"menu-icons-grid"},a._l(a.dialogIcon.elementIcons,(function(e){return f("div",{staticClass:"menu-icon-item",on:{click:function(f){return a.pickIcon(e)}}},[f("i",{class:"fa "+e}),f("span",[a._v(a._s(e))])])})),0)])],1)])},r=[],o=f("7580"),i=(f("96cf"),f("d81d"),f("4de4"),f("d3b7"),f("4e82"),{name:"Index",data:function(){var a=this,e=function(e,f,t){3===a.dialog.data.menuType?f?t():t(new Error("当类型是按钮类型时此项必填")):t()};return{tableData:[],dialog:{title:"新增菜单",visible:!1,data:{id:"",menuName:"",parentId:[],url:"",icon:"",sort:"",visible:!0,resourceCode:"",isLocked:!1,menuType:""},rules:{menuName:[{required:!0,message:"菜单名称为必填项",trigger:"blur"}],menuType:[{required:!0,message:"类型为必选项",trigger:"blur"}],resourceCode:[{validator:e,trigger:"blur"}]},updateLoading:!1,disabled:!1,checkStrictly:!0},dialogIcon:{visible:!1,elementIcons:["fa-adjust","fa-anchor","fa-archive","fa-area-chart","fa-arrows","fa-arrows-h","fa-arrows-v","fa-asterisk","fa-at","fa-automobile","fa-ban","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-beer","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-briefcase","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-cab","fa-calculator","fa-calendar","fa-calendar-o","fa-camera","fa-camera-retro","fa-car","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-cc","fa-certificate","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-child","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clock-o","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-code","fa-code-fork","fa-coffee","fa-cog","fa-cogs","fa-comment","fa-comment-o","fa-comments","fa-comments-o","fa-compass","fa-copyright","fa-credit-card","fa-crop","fa-crosshairs","fa-cube","fa-cubes","fa-cutlery","fa-dashboard","fa-database","fa-desktop","fa-dot-circle-o","fa-download","fa-edit","fa-ellipsis-h","fa-ellipsis-v","fa-envelope","fa-envelope-o","fa-envelope-square","fa-eraser","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fax","fa-female","fa-fighter-jet","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gear","fa-gears","fa-gift","fa-glass","fa-globe","fa-graduation-cap","fa-group","fa-hdd-o","fa-headphones","fa-heart","fa-heart-o","fa-history","fa-home","fa-image","fa-inbox","fa-info","fa-info-circle","fa-institution","fa-key","fa-keyboard-o","fa-language","fa-laptop","fa-leaf","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-location-arrow","fa-lock","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map-marker","fa-meh-o","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mobile","fa-mobile-phone","fa-money","fa-moon-o","fa-mortar-board","fa-music","fa-navicon","fa-newspaper-o","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paw","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-plane","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-power-off","fa-print","fa-puzzle-piece","fa-qrcode","fa-question","fa-question-circle","fa-quote-left","fa-quote-right","fa-random","fa-recycle","fa-refresh","fa-remove","fa-reorder","fa-reply","fa-reply-all","fa-retweet","fa-road","fa-rocket","fa-rss","fa-rss-square","fa-search","fa-search-minus","fa-search-plus","fa-send","fa-send-o","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shield","fa-shopping-cart","fa-sign-in","fa-sign-out","fa-signal","fa-sitemap","fa-sliders","fa-smile-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-space-shuttle","fa-spinner","fa-spoon","fa-square","fa-square-o","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-suitcase","fa-sun-o","fa-support","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-terminal","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trash","fa-trash-o","fa-tree","fa-trophy","fa-truck","fa-tty","fa-umbrella","fa-university","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-user","fa-users","fa-video-camera","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wheelchair","fa-wifi","fa-wrench","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-circle-o-notch","fa-cog","fa-gear","fa-refresh","fa-spinner","fa-check-square","fa-check-square-o","fa-circle","fa-circle-o","fa-dot-circle-o","fa-minus-square","fa-minus-square-o","fa-plus-square","fa-plus-square-o","fa-square","fa-square-o","fa-cc-amex","fa-cc-discover","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-credit-card","fa-google-wallet","fa-paypal","fa-area-chart","fa-bar-chart","fa-bar-chart-o","fa-line-chart","fa-pie-chart","fa-bitcoin","fa-btc","fa-cny","fa-dollar","fa-eur","fa-euro","fa-gbp","fa-ils","fa-inr","fa-jpy","fa-krw","fa-money","fa-rmb","fa-rouble","fa-rub","fa-ruble","fa-rupee","fa-shekel","fa-sheqel","fa-try","fa-turkish-lira","fa-usd","fa-won","fa-yen","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-bold","fa-chain","fa-chain-broken","fa-clipboard","fa-columns","fa-copy","fa-cut","fa-dedent","fa-eraser","fa-file","fa-file-o","fa-file-text","fa-file-text-o","fa-files-o","fa-floppy-o","fa-font","fa-header","fa-indent","fa-italic","fa-link","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-outdent","fa-paperclip","fa-paragraph","fa-paste","fa-repeat","fa-rotate-left","fa-rotate-right","fa-save","fa-scissors","fa-strikethrough","fa-subscript","fa-superscript","fa-table","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-underline","fa-undo","fa-unlink","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-toggle-down","fa-toggle-left","fa-toggle-right","fa-toggle-up","fa-arrows-alt","fa-backward","fa-compress","fa-eject","fa-expand","fa-fast-backward","fa-fast-forward","fa-forward","fa-pause","fa-play","fa-play-circle","fa-play-circle-o","fa-step-backward","fa-step-forward","fa-stop","fa-youtube-play","fa-adn","fa-android","fa-angellist","fa-apple","fa-behance","fa-behance-square","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-btc","fa-cc-amex","fa-cc-discover","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-codepen","fa-css3","fa-delicious","fa-deviantart","fa-digg","fa-dribbble","fa-dropbox","fa-drupal","fa-empire","fa-facebook","fa-facebook-square","fa-flickr","fa-foursquare","fa-ge","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gittip","fa-google","fa-google-plus","fa-google-plus-square","fa-google-wallet","fa-hacker-news","fa-html5","fa-instagram","fa-ioxhost","fa-joomla","fa-jsfiddle","fa-lastfm","fa-lastfm-square","fa-linkedin","fa-linkedin-square","fa-linux","fa-maxcdn","fa-meanpath","fa-openid","fa-pagelines","fa-paypal","fa-pied-piper","fa-pied-piper-alt","fa-pinterest","fa-pinterest-square","fa-qq","fa-ra","fa-rebel","fa-reddit","fa-reddit-square","fa-renren","fa-share-alt","fa-share-alt-square","fa-skype","fa-slack","fa-slideshare","fa-soundcloud","fa-spotify","fa-stack-exchange","fa-stack-overflow","fa-steam","fa-steam-square","fa-stumbleupon","fa-stumbleupon-circle","fa-tencent-weibo","fa-trello","fa-tumblr","fa-tumblr-square","fa-twitch","fa-twitter","fa-twitter-square","fa-vimeo-square","fa-vine","fa-vk","fa-wechat","fa-weibo","fa-weixin","fa-windows","fa-wordpress","fa-xing","fa-xing-square","fa-yahoo","fa-yelp","fa-youtube","fa-youtube-play","fa-youtube-square","fa-ambulance","fa-h-square","fa-hospital-o","fa-medkit","fa-plus-square","fa-stethoscope","fa-user-md","fa-wheelchair"]}}},watch:{"dialog.visible":function(a,e){a||(this.dialog.data={id:"",menuName:"",parentId:[],url:"",icon:"",sort:"",visible:!1,resourceCode:"",isLocked:!1,menuType:""},this.dialog.updateLoading=!1,this.dialog.disabled=!1)}},created:function(){this.getList()},methods:{pickIcon:function(a){this.dialogIcon.visible=!1,this.dialog.data.icon=a},auUpdateData:function(){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var f,t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.au.updateLoading=!0,f=a.$refs.tree.getCheckedNodes(!1,!0),t=[],f.map((function(e){t.push({PermissionId:e.id,roleId:a.au.temp.id,isMenu:e.isMenu,roleCode:e.resourceCode})})),e.next=6,service.post("/Admin/Role/Permission",t);case 6:r=e.sent,r.data.success&&(a.getList(),a.$notify({title:"Success",message:"授权成功",type:"success",duration:2e3}),a.au.visible=!1,a.au.updateLoading=!1);case 8:case"end":return e.stop()}}),e)})))()},getList:function(){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var f,t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,service.get("/Admin/Menu/Edit?handler=Menu");case 2:f=e.sent,t=f.data.data,r=[],a.ddd(t,null,r),a.tableData=r;case 7:case"end":return e.stop()}}),e)})))()},ddd:function(a,e,f){var t=a.filter((function(a){return a.parentId===e}));for(var r in t){var o=t[r];o.children=[],f.unshift(o),this.ddd(a,o.id,o.children)}},handleEdit:function(a,e,f){if(this.dialog.visible=!0,"add"!==f){var t=e.id,r=e.menuName,o=e.parentId,i=e.url,l=e.icon,s=e.sort,n=e.visible,c=e.resourceCode,d=e.isLocked,u=e.menuType;this.dialog.data={id:t,menuName:r,parentId:[o],url:i,icon:l,sort:s,visible:n,resourceCode:c,isLocked:d,menuType:u};var p=[];this.recursionFunc(e,this.tableData,p),this.dialog.data.parentId=p,"edit"===f?(this.dialog.title="编辑菜单",e.isLocked&&(this.dialog.disabled=!0)):"addNext"===f&&(this.dialog.data.id="",this.dialog.title="增加下一级菜单",this.dialog.data.menuName="",this.dialog.data.parentId.push(e.id))}else this.dialog.title="新增菜单"},recursionFunc:function(a,e,f){if(null!==a.parentId)for(var t in e){var r=e[t];a.parentId===r.id?(this.recursionFunc(r,this.tableData,f),f.push(r.id)):this.recursionFunc(a,r.children,f)}},updateData:function(){var a=this;this.$refs["dataForm"].validate((function(e){if(e){a.dialog.updateLoading=!0;var f={Id:a.dialog.data.id,MenuName:a.dialog.data.menuName,ParentId:a.dialog.data.parentId[a.dialog.data.parentId.length-1],Url:a.dialog.data.url,Icon:"fa "+a.dialog.data.icon,Sort:1*a.dialog.data.sort,Visible:a.dialog.data.visible,ResourceCode:a.dialog.data.resourceCode,IsLocked:a.dialog.data.isLocked,MenuType:a.dialog.data.menuType};service.post("/Admin/Menu/Edit",f).then((function(e){e.data.success&&(a.getList(),a.$notify({title:"Success",message:"成功",type:"success",duration:2e3}),a.dialog.visible=!1)}))}}))},handleDelete:function(a,e){var f=this,t=[e.id];service.post("/Admin/Menu/edit?handler=Delete",t).then((function(a){a.data.success&&(f.getList(),f.$notify({title:"Success",message:"删除成功",type:"success",duration:2e3}))}))}}}),l=i,s=f("2877"),n=Object(s["a"])(l,t,r,!1,null,"61fb9c2e",null);e["default"]=n.exports}}]);